{% extends 'base.html' %}
{% load blog_lib %}

{% block main %}
<section class="content-box zerogrid">
    <div class="row wrap-box">
        <h3 class="t-center" style="font-size: 30px;margin: 10px 0 30px">Blogs</h3>
        <h1>Posts</h1>
        {% for post in page_obj %}
        <div class="col-md-6">
            <h2>{{ post.title }}</h2>
            <img src="{{ post.image.url }}" alt="Post image">
            <p>{{ post.author }} - <span>{{ post.views }} views</span></p>
            <p>Created - {{ post.created }}</p>
            <p>{{ post.short_desc }}</p>
            <a href="{% url 'single_post_page' post.slug %}">Read</a>
            {% for tag in post.tags.all %}
                <a href="{{ request.path|add_tag:tag.value }}">{{ tag }}</a>
            {% endfor %}
        </div>
        {% endfor %}
    </div>
    {% if is_paginated %}
    <div class="row">
        <ul>
            <li><a {% if page_obj.has_previous %}href="?page=1" {% endif %}>First</a></li>
            <li>
                <a {% if page_obj.has_previous %}href="?page={{ page_obj.previous_page_number }}" {% endif %}>
                    Previous</a>
            </li>

            <!--            {% for np in paginator.page_range %}-->
            <!--                <li><a href="?page={{ np }}">{{ np }}</a></li>-->
            <!--            {% endfor %}-->

            {% with page_obj.number|pages_win:paginator.num_pages as pages %}
            {% for np in pages %}
                <li><a href="?page={{ np }}">{{ np }}</a></li>
            {% endfor %}
            {% endwith %}

            <li><a {% if page_obj.has_next %}href="?page={{ page_obj.next_page_number }}" {% endif %}>Next</a></li>
            <li><a {% if page_obj.has_next %}href="?page={{ page_obj.paginator.num_pages }}" {% endif %}>Last</a></li>
        </ul>
    </div>
    {% endif %}
</section>
{% endblock main %}